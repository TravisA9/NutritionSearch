<!DOCTYPE html>
<meta charset="utf-8">
<script data-ad-client="ca-pub-6264859693176184" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<script src="https://d3js.org/d3.v5.min.js"></script>
<body style="background-color: #1c1c1e; color:white;">
    <form><label>Order by <select id="select" name=""></select></label></form>
</body>


<script>

// chart.update(primary)
//==============================================================================
keys = ["<10", "10-19", "20-29", "30-39", "40-49", "50-59", "60-69", "70-79", "≥80"]

// var select = document.getElementById('select')
var str = ""
for (var i = 0; i < keys.length; i++) {
    str += "<option onclick=\"update('"+keys[i]+"')\">"+keys[i]+"</option>"
}
document.getElementById('select').innerHTML = str
document.getElementById('select').name = keys[0]

margin = {top: 20, right: 50, bottom: 10, left: 10}
width = 900
//==============================================================================
data = [
   {"name":"AL", "<10":0.12362274857864762, "10-19":0.1319494650460096, "20-29":0.1366749814713982, "30-39":0.1245595067632495, "40-49":0.12922491367778494, "50-59":0.13919462344180036, "60-69":0.1132735846172532, "70-79":0.06539708218932472, "≥80":0.036103094214531874, "total":4841164}
  ,{"name":"AK", "<10":0.14486025065989916, "10-19":0.13561148394188816, "20-29":0.1637689911855114, "30-39":0.1384370059238249, "40-49":0.12422932598679523, "50-59":0.14191258795828215, "60-69":0.0956402548669684, "70-79":0.038572039275026976, "≥80":0.016968060201803612, "total":736855}
  ,{"name":"AZ", "<10":0.13258122779898335, "10-19":0.13565052462058472, "20-29":0.1396735149200195, "30-39":0.12737522361711845, "40-49":0.12384342187062733, "50-59":0.12407645777108592, "60-69":0.10966419794259619, "70-79":0.06927958170055867, "≥80":0.03785584975842589, "total":6728577}
  ,{"name":"AR", "<10":0.13211409775803848, "10-19":0.1338011610013502, "20-29":0.13464772448586343, "30-39":0.12565319800894198, "40-49":0.12469613996695943, "50-59":0.1330886732298637, "60-69":0.111078696379821, "70-79":0.06669592975780132, "≥80":0.038224379411360455, "total":2968472}
  ,{"name":"CA", "<10":0.1303463069452261, "10-19":0.13375882045022475, "20-29":0.15029295906375623, "30-39":0.13851305081780751, "40-49":0.13398950685987446, "50-59":0.13044101850132428, "60-69":0.09668963320576292, "70-79":0.052042926454109545, "≥80":0.033925777701914246, "total":38654206}
  ,{"name":"CO", "<10":0.1289031486417523, "10-19":0.13013782596404938, "20-29":0.14563631970249818, "30-39":0.14300052525565396, "40-49":0.1316311193916364, "50-59":0.1354023243728886, "60-69":0.10512128927405563, "70-79":0.05121307933226292, "≥80":0.028954368065202605, "total":5359295}
  ,{"name":"CT", "<10":0.1112891764686212, "10-19":0.1340547906269071, "20-29":0.12883209746500696, "30-39":0.11840092293030371, "40-49":0.13829046110289056, "50-59":0.15225033927163187, "60-69":0.11174228174453892, "70-79":0.060700223208687586, "≥80":0.044439707181412096, "total":3588570}
  ,{"name":"DE", "<10":0.12001455020086767, "10-19":0.126088189195406, "20-29":0.13646590599072425, "30-39":0.12203232070354501, "40-49":0.12580360438431787, "50-59":0.14264653175634834, "60-69":0.11856487945265567, "70-79":0.06993618239104735, "≥80":0.03844783592508786, "total":934695}
  ,{"name":"DC", "<10":0.11286188807740107, "10-19":0.09526880513012721, "20-29":0.20785148609503057, "30-39":0.18439808864522336, "40-49":0.12225933181489175, "50-59":0.11347189492101019, "60-69":0.08646922879657182, "70-79":0.04758963838126642, "≥80":0.029829638138477624, "total":659009}
  ,{"name":"FL", "<10":0.11091411546773974, "10-19":0.11693835962675872, "20-29":0.1303186127373159, "30-39":0.12120604675794683, "40-49":0.12920225392713347, "50-59":0.138603415764999, "60-69":0.12062830323242912, "70-79":0.0810429642632245, "≥80":0.051145928222452675, "total":19934451}
  ,{"name":"GA", "<10":0.1350220608912283, "10-19":0.1407576945774567, "20-29":0.14047440817797635, "30-39":0.1343862755116186, "40-49":0.1390883742667823, "50-59":0.13248268200235264, "60-69":0.09884358550872732, "70-79":0.052291441403975715, "≥80":0.02665347765988205, "total":10099320}
  ,{"name":"HI", "<10":0.12484075171556647, "10-19":0.11569790184858875, "20-29":0.1445426205353006, "30-39":0.13269688251809295, "40-49":0.1251378501251704, "50-59":0.13329673835462658, "60-69":0.11668681512627035, "70-79":0.06037110420868192, "≥80":0.04672933556770201, "total":1413673}
  ,{"name":"ID", "<10":0.14470220723786184, "10-19":0.14644542315633974, "20-29":0.13371218166131962, "30-39":0.12809671515998639, "40-49":0.11903394899243831, "50-59":0.12544917923329071, "60-69":0.10971009787322766, "70-79":0.05968940062354668, "≥80":0.033160846061989026, "total":1635483}
  ,{"name":"IL", "<10":0.12602877568418272, "10-19":0.1335221127441353, "20-29":0.13926104936909436, "30-39":0.13398664330682267, "40-49":0.13205032118748017, "50-59":0.1379870529029503, "60-69":0.10318655516273198, "70-79":0.056710155649640936, "≥80":0.037267333992961546, "total":12851684}
  ,{"name":"IN", "<10":0.13096878130890932, "10-19":0.1374282237800357, "20-29":0.1374276167608912, "30-39":0.12551425903145846, "40-49":0.12808999301624474, "50-59":0.1383666753773914, "60-69":0.10691473718043856, "70-79":0.058393420640896886, "≥80":0.036896292903733745, "total":6589578}
  ,{"name":"IA", "<10":0.12930967051000308, "10-19":0.1347674249796159, "20-29":0.13502140128610512, "30-39":0.12349171390228962, "40-49":0.11933313354293085, "50-59":0.13762811881455836, "60-69":0.11074429221245552, "70-79":0.06348538541789725, "≥80":0.0462188593341443, "total":3106589}
  ,{"name":"KS", "<10":0.13861646790592527, "10-19":0.13873412340785538, "20-29":0.14041235320664722, "30-39":0.1272238960049574, "40-49":0.11883792247295993, "50-59":0.1345047358927258, "60-69":0.10377111760995786, "70-79":0.057310995579465424, "≥80":0.0405883879195057, "total":2898292}
  ,{"name":"KY", "<10":0.12593299756640372, "10-19":0.13052299087781044, "20-29":0.1345921306694101, "30-39":0.1265191277675443, "40-49":0.1315853235354848, "50-59":0.14124332585598015, "60-69":0.11236111422761934, "70-79":0.062094669773655374, "≥80":0.035148319726091795, "total":4411989}
  ,{"name":"LA", "<10":0.13390124567608117, "10-19":0.1320870832409534, "20-29":0.14714906568912559, "30-39":0.1324698052164704, "40-49":0.12312346765913205, "50-59":0.13602688094505205, "60-69":0.10522615682990828, "70-79":0.057284094651578785, "≥80":0.03273220009169829, "total":4645670}
  ,{"name":"ME", "<10":0.10373081749845668, "10-19":0.1171300894863838, "20-29":0.11756996457689656, "30-39":0.11105530169791784, "40-49":0.13302123506398492, "50-59":0.1622552583871397, "60-69":0.1350002970096765, "70-79":0.07361253245488648, "≥80":0.04662450382465752, "total":1329923}
  ,{"name":"MD", "<10":0.12449063759773231, "10-19":0.12831251252117903, "20-29":0.1368052696168494, "30-39":0.13156206259767358, "40-49":0.13689402946558518, "50-59":0.14476378974016688, "60-69":0.10676501056560997, "70-79":0.055493529927169945, "≥80":0.0349131579680337, "total":5959902}
  ,{"name":"MA", "<10":0.1094233688012847, "10-19":0.12790755105609597, "20-29":0.14406991960864668, "30-39":0.12567309830123746, "40-49":0.13587756889760422, "50-59":0.14522504194882843, "60-69":0.10943182308651715, "70-79":0.059614724873085605, "≥80":0.04277690342669979, "total":6742143}
  ,{"name":"MI", "<10":0.1192201501574231, "10-19":0.13361497941390166, "20-29":0.13503864939049004, "30-39":0.11727880035521111, "40-49":0.1294827238233632, "50-59":0.14677302817469928, "60-69":0.11586047872769839, "70-79":0.06253753935577622, "≥80":0.04019365060143699, "total":9909600}
  ,{"name":"MN", "<10":0.13054874930011146, "10-19":0.1310615116711687, "20-29":0.13359743805940633, "30-39":0.1312787247829153, "40-49":0.12698913273995996, "50-59":0.14358355403212847, "60-69":0.1059121226197369, "70-79":0.05740480231772261, "≥80":0.03962396447685029, "total":5450868}
  ,{"name":"MS", "<10":0.13391177281352284, "10-19":0.14095079874427605, "20-29":0.13856420062679145, "30-39":0.1253596289565876, "40-49":0.12617623759196464, "50-59":0.13387029003155368, "60-69":0.10686600258531402, "70-79":0.06061671515245592, "≥80":0.03368435349753378, "total":2989192}
  ,{"name":"MO", "<10":0.12607128694375302, "10-19":0.13085489576874973, "20-29":0.13725625452686963, "30-39":0.12591517234243357, "40-49":0.12393271493688333, "50-59":0.1415154107059961, "60-69":0.11038226458916528, "70-79":0.06404428241824488, "≥80":0.04002771776790445, "total":6059651}
  ,{"name":"MT", "<10":0.1231396406652003, "10-19":0.1234073780207174, "20-29":0.1332296258223885, "30-39":0.12214686273379383, "40-49":0.11383918756369756, "50-59":0.14637611626445807, "60-69":0.12798334165533995, "70-79":0.06891598616755473, "≥80":0.04096186110684968, "total":1023391}
  ,{"name":"NE", "<10":0.140075343161149, "10-19":0.1369348930689501, "20-29":0.13854870594639015, "30-39":0.12982582408908078, "40-49":0.1182606966930125, "50-59":0.13337397987198998, "60-69":0.10402873820138535, "70-79":0.057222317607517094, "≥80":0.04172950136052505, "total":1881259}
  ,{"name":"NV", "<10":0.13009497135080228, "10-19":0.12689016375196713, "20-29":0.13836217037925141, "30-39":0.13745592024717065, "40-49":0.13640314852358362, "50-59":0.1316429578764513, "60-69":0.10906383973919156, "70-79":0.06110901347294211, "≥80":0.028977814658639914, "total":2839172}
  ,{"name":"NH", "<10":0.1045285773365484, "10-19":0.12617297286710463, "20-29":0.12621741721110988, "30-39":0.11405548612696167, "40-49":0.1376290675049322, "50-59":0.1641804199312544, "60-69":0.123756405823565, "70-79":0.06387254868727227, "≥80":0.039587104511251574, "total":1327503}
  ,{"name":"NJ", "<10":0.12104103256187905, "10-19":0.12939607351547694, "20-29":0.12785964060615632, "30-39":0.1282550213920634, "40-49":0.1407221346838569, "50-59":0.14662884321340378, "60-69":0.1061526185536668, "70-79":0.05873171265721013, "≥80":0.04121292281628668, "total":8915456}
  ,{"name":"NM", "<10":0.13274697035390645, "10-19":0.13572103872482857, "20-29":0.13914885178585748, "30-39":0.1251178175696666, "40-49":0.11732349211516568, "50-59":0.13461716672212434, "60-69":0.11477772031945546, "70-79":0.06482691200570037, "≥80":0.035720030403295, "total":2082669}
  ,{"name":"NY", "<10":0.1177789092267088, "10-19":0.1241577021846018, "20-29":0.1469360232643229, "30-39":0.1322685969056818, "40-49":0.13287639109962265, "50-59":0.13989724663442596, "60-69":0.10636941611295306, "70-79":0.05889364297127289, "≥80":0.04082207160041015, "total":19697457}
  ,{"name":"NC", "<10":0.1257740300908536, "10-19":0.13181980414508732, "20-29":0.13582792097398727, "30-39":0.1276529480240479, "40-49":0.13658278767120807, "50-59":0.1364189180217181, "60-69":0.11018398065030398, "70-79":0.06128604176633978, "≥80":0.03445356865645397, "total":9940828}
  ,{"name":"ND", "<10":0.1351292242740049, "10-19":0.12370782517978379, "20-29":0.1691326093984748, "30-39":0.12865782259883016, "40-49":0.10911592828752367, "50-59":0.13405744931142874, "60-69":0.10028363322203537, "70-79":0.05616698498428335, "≥80":0.043748522743635235, "total":736162}
  ,{"name":"OH", "<10":0.12279668982520926, "10-19":0.13206798929933275, "20-29":0.13252315688843155, "30-39":0.12071555382909087, "40-49":0.12867580839498535, "50-59":0.14480042661820752, "60-69":0.11398832530518624, "70-79":0.06284298849886265, "≥80":0.0415890613406938, "total":11586941}
  ,{"name":"OK", "<10":0.13790961838316704, "10-19":0.13476196779379856, "20-29":0.14256620090520433, "30-39":0.12937181935442588, "40-49":0.12111965432867107, "50-59":0.13232827319924792, "60-69":0.10442386950731876, "70-79":0.06189691424967921, "≥80":0.03562168227848722, "total":3875589}
  ,{"name":"OR", "<10":0.11914218710096536, "10-19":0.1218765592563231, "20-29":0.13524859081523163, "30-39":0.13504041793280058, "40-49":0.12752183618024607, "50-59":0.13420019300564226, "60-69":0.12326998666839767, "70-79":0.0642370288079629, "≥80":0.03946320023243042, "total":3982267}
  ,{"name":"PA", "<10":0.1141218417398592, "10-19":0.12578386209549658, "20-29":0.13395268154815987, "30-39":0.1189308303667943, "40-49":0.12869946496305493, "50-59":0.14716687928959823, "60-69":0.1166723000205648, "70-79":0.06655964728347055, "≥80":0.04811249269300156, "total":12783977}
  ,{"name":"RI", "<10":0.10562157476924885, "10-19":0.12981144457373273, "20-29":0.1457328701714856, "30-39":0.11996593617204888, "40-49":0.13076640767915515, "50-59":0.14805911098340338, "60-69":0.11157326141237811, "70-79":0.06008491300542157, "≥80":0.04838448123312575, "total":1054491}
  ,{"name":"SC", "<10":0.12402068007624201, "10-19":0.128065064260679, "20-29":0.13807187970889037, "30-39":0.12337946947061859, "40-49":0.1281990979614674, "50-59":0.137220724340458, "60-69":0.11993865062399099, "70-79":0.06661826560804864, "≥80":0.03448616794960498, "total":4834605}
  ,{"name":"SD", "<10":0.1414310188024788, "10-19":0.13322593759767254, "20-29":0.1371798396819018, "30-39":0.12396217414089286, "40-49":0.11313917500334877, "50-59":0.13749004180678637, "60-69":0.10906894712228779, "70-79":0.05921805564368116, "≥80":0.045284810200949877, "total":851058}
  ,{"name":"TN", "<10":0.12498516724702119, "10-19":0.12872202832952734, "20-29":0.1367342347880096, "30-39":0.12787291526325026, "40-49":0.1323063239528229, "50-59":0.13809877170297108, "60-69":0.11317104176246551, "70-79":0.06336872780718536, "≥80":0.03474078914674674, "total":6548009}
  ,{"name":"TX", "<10":0.14776030287387779, "10-19":0.14506844098635446, "20-29":0.1464009243062, "30-39":0.13987509846906684, "40-49":0.13153616195910178, "50-59":0.12408651218159968, "60-69":0.09020087411410299, "70-79":0.047910118678527035, "≥80":0.027161566431169404, "total":26956435}
  ,{"name":"UT", "<10":0.1741657500762271, "10-19":0.16250224272128833, "20-29":0.15778549036486234, "30-39":0.14787885201159806, "40-49":0.11143874343845041, "50-59":0.10229047556544557, "60-69":0.07801007113284474, "70-79":0.04194575616082745, "≥80":0.02398261852845602, "total":2948427}
  ,{"name":"VT", "<10":0.10182531229590785, "10-19":0.12670838596149456, "20-29":0.13056308273546147, "30-39":0.11192353201362397, "40-49":0.12771597240075433, "50-59":0.15891602222119317, "60-69":0.13115549885109598, "70-79":0.06862765449525668, "≥80":0.04256453902521202, "total":626249}
  ,{"name":"VA", "<10":0.12437924931960949, "10-19":0.1282096761597444, "20-29":0.14086541510349626, "30-39":0.1338231912418094, "40-49":0.13656881982975105, "50-59":0.1398298328784962, "60-69":0.10610482099264515, "70-79":0.05717494468611907, "≥80":0.033044049788328964, "total":8310301}
  ,{"name":"WA", "<10":0.126646615240234, "10-19":0.12481178813501093, "20-29":0.1420058344617798, "30-39":0.1372250763663015, "40-49":0.13023978297634461, "50-59":0.13719595212653607, "60-69":0.11087117387369072, "70-79":0.05670659138097814, "≥80":0.03429718543912426, "total":7073146}
  ,{"name":"WV", "<10":0.11213796495515933, "10-19":0.11838359085029349, "20-29":0.12568550213098806, "30-39":0.11943825118141457, "40-49":0.1290390728089391, "50-59":0.145900637671362, "60-69":0.13168791154503676, "70-79":0.07482508997384746, "≥80":0.04290197888295925, "total":1846092}
  ,{"name":"WI", "<10":0.12261907368425443, "10-19":0.13123379830186915, "20-29":0.13223070557819752, "30-39":0.12415361929297952, "40-49":0.12724686426873716, "50-59":0.14747207460626768, "60-69":0.11208299578890518, "70-79":0.06095296481301342, "≥80":0.042007903665775934, "total":5754798}
  ,{"name":"WY", "<10":0.13415627696049426, "10-19":0.1295561627294697, "20-29":0.14218503710793118, "30-39":0.13191796634472727, "40-49":0.11742812107116456, "50-59":0.13896049767678795, "60-69":0.11574724413365373, "70-79":0.05629051042057942, "≥80":0.03375818355519194, "total":583029}
  ,{"name":"PR", "<10":0.11033877006900636, "10-19":0.13592991413518218, "20-29":0.1360531650698351, "30-39":0.1251895160204965, "40-49":0.12920352979343427, "50-59":0.12821015559367993, "60-69":0.11671268507119513, "70-79":0.0761557608478531, "≥80":0.04220650339931745, "total":3529385}
]
//==============================================================================
height = data.length * 16
//==============================================================================
names = [ "AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY", "PR"]
//==============================================================================
keys = ["<10", "10-19", "20-29", "30-39", "40-49", "50-59", "60-69", "70-79", "≥80"]
//==============================================================================
x = d3.scaleLinear()
    .domain([0, d3.max(data, d => d3.max(keys, k => d[k]))])
    .rangeRound([margin.left, width - margin.right])
//==============================================================================
color = d3.scaleOrdinal()
    .unknown("#fff")
    .domain(keys)
    .range(d3.quantize(t => d3.interpolateSpectral(t * 0.8 + 0.1), keys.length).reverse())
//==============================================================================
xAxis = g => g
    .attr("transform", `translate(0,${margin.top})`)
    .call(d3.axisTop(x).ticks(null, "%"))
    .call(g => g.selectAll(".tick line").clone().attr("stroke-opacity", 0.1).attr("y2", height - margin.bottom))
    .call(g => g.selectAll(".domain").remove())
//==============================================================================
y = d3.scalePoint()
    .domain(names)
    .rangeRound([margin.top, height - margin.bottom])
    .padding(1)
//==============================================================================
legend = svg => {
  const g = svg
      .attr("font-family", "sans-serif")
      .attr("font-size", 10)
      .attr("text-anchor", "end")
      .attr("transform", "translate("+width+","+margin.top+")")
    .selectAll("g")
    .data(keys.slice().reverse())
    .join("g")
      .attr("transform", (d, i) => "translate(0,"+(i * 20)+")");

  g.append("rect")
      .attr("x", -19)
      .attr("width", 19)
      .attr("height", 19)
      .attr("fill", color);

  g.append("text")
      .attr("x", -24)
      .attr("y", 9.5)
      .attr("dy", "0.35em")
      .attr("fill", "white")
      .text(d => d);
}

//==============================================================================
// d3 = require("d3@5")
//==============================================================================
// chart = {
  // const svg = d3.select(DOM.svg(width, height));
  var svg = d3.select("body").append("svg")
      .attr("width", width)
      .attr("height", height)

  svg.append("g")
      .call(xAxis);

  const g = svg.append("g")
      .attr("text-anchor", "end")
      .style("font", "10px sans-serif")
    .selectAll("g")
    .data(data)
    .join("g")
      .attr("transform", (d, i) => "translate(0,"+y(d.name)+")");

  g.append("line")
      .attr("stroke", "#aaa")
      .attr("x1", d => x(d3.min(keys, k => d[k])))
      .attr("x2", d => x(d3.max(keys, k => d[k])));

  g.append("g")
    .selectAll("circle")
    .data(d => d3.cross(keys, [d]))
    .join("circle")
      .attr("cx", ([k, d]) => x(d[k]))
      .attr("fill", ([k]) => color(k))
      .attr("r", 5.5);

  g.append("text")
      .attr("dy", "0.35em")
      .attr("fill", "white")
      .attr("x", d => x(d3.min(keys, k => d[k])) - 6)
      .text((d, i) => d.name);

  svg.append("g")
      .call(legend);

function update(primary) {
    // Compute the desired order based on the selected age group.
    y.domain(d3.permute(names, d3.range(data.length)
        .sort((i, j) => data[j][primary] - data[i][primary])));

// list.sort((a, b) => (a.color > b.color) ? 1 : -1)
    // Transition the columns to their new position.
    g.transition()
        .delay((d, i) => i * 10)
        .attr("transform", d => "translate(0,"+y(d.name)+")")
}

  // return  Object.assign(svg.node(), {update});
  svg.node()
// <!-- } -->
//==============================================================================
</script>
